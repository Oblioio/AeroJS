/* AeroJS v0.0.1 - http://oblio.io - @oblioio - (c) 2015 Oblio */
window.Aero=window.Aero||{},Aero.utils=Aero.utils||{},Aero.JSPrograms=Aero.JSPrograms||{},Aero.registerJSProgram=function(a,b){console.log("Aero.registerJSProgram: "+a),console.log("Aero.registerJSProgram2: "+a),Aero.JSPrograms[a]=b},function(a){function b(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=null);a=null}var c=function(a,b){this.task_arr=[],this.defaultScope=a||this,this.id=b||"",this.verbose=!1};c.prototype={execute:function(a){this.verbose&&console.log("ArrayExecuter | "+this.id+" | execute"),this.addNext(a),this.runStep("")},addNext:function(a){if(this.verbose&&console.log("ArrayExecuter | "+this.id+" | addNext"),"function"==typeof a)this.task_arr.unshift({fn:a,vars:null});else{a.reverse();for(var b=0;b<a.length;b++)a[b]&&this.task_arr.unshift(a[b])}},tackOn:function(a){this.verbose&&console.log("ArrayExecuter | "+this.id+" | tackOn");for(var b=0;b<a.length;b++)this.task_arr.push(a[b]);this.runStep("")},runFunctionInScope:function(a){var b=a[0],c=a[1];a.length>2?a[2]:null;a.length>2?b[c](a[2]):b[c]()},runStep:function(a){if(this.verbose&&console.log("ArrayExecuter | "+this.id+" | runStep"),0!=this.task_arr.length){var c=this.task_arr.shift(),d=c.fn;c.scope=c.scope||this.defaultScope,c.vars=c.vars||[],"string"==typeof c.vars&&(c.vars=[c.vars]),d.apply(c.scope,c.vars),b(c)}},stepComplete:function(b){this.verbose&&console.log("ArrayExecuter | "+this.id+" | stepComplete"),this.task_arr.length>0&&a.requestAnimationFrame(this.runStep.bind(this))},stepComplete_instant:function(a){this.verbose&&console.log("ArrayExecuter | "+this.id+" | stepComplete_instant"),this.task_arr.length>0&&this.runStep()},clearArrayExecuter:function(){this.verbose&&console.log("ArrayExecuter | "+this.id+" | clearArrayExecuter"),this.task_arr=[]},destroy:function(){for(var a=0;a<this.task_arr.length;a++)b(this.task_arr[a]);this.task_arr=[],this.defaultScope=null}},Aero.utils.ArrayExecuter=c}(window),function(a){var b=function(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||0==c.status)try{b(c.responseText)}catch(d){console.error(d)}else console.error("Couldn't load ["+a+"] ["+c.status+"]")},c.open("GET",a,!0),c.overrideMimeType("text/plain; charset=x-user-defined"),c.setRequestHeader("Content-Type","text/plain"),c.send(null)};Aero.utils.XHRLoader=b}(window),function(a){"use strict";function b(a){var b=[{fn:i(c,this),vars:"vShader"},{fn:i(c,this),vars:"fShader"},{fn:i(d,this),vars:null},{fn:i(e,this),vars:null},{fn:a,vars:null}];this.arrayExecuter.execute(b)}function c(a){console.log("loadShader: "+this[a].path),Aero.utils.XHRLoader(this[a].path,i(function(b){this[a].text=b,this.arrayExecuter.stepComplete()},this))}function d(){console.log("createProgram");var a=this.gl,b=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(b,this.fShader.text),a.compileShader(b),h.call(this,a,"2d-fragment-shader",b)){this.fShader.obj=b;var c=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(c,this.vShader.text),a.compileShader(c),h.call(this,a,"2d-vertex-shader",c)){this.vShader.obj=c;var d=a.createProgram();a.attachShader(d,c),a.attachShader(d,b),a.linkProgram(d),a.getProgramParameter(d,a.LINK_STATUS)||console.log("Unable to initialize the shader program."),a.useProgram(d),this.program=d,a.program=d,this.arrayExecuter.stepComplete()}}}function e(){var a,b,c,d,e=this.gl,f=this.settings.uniforms;this.uniforms=[],this.inputs={};for(var g in f){switch(a=f[g],b=e.getUniformLocation(this.program,g),c=a.val,a.type){case"f":case"1f":d=Aero.GLUploaders.uniform1f;break;case"2f":d=Aero.GLUploaders.uniform2f;break;case"3f":d=Aero.GLUploaders.uniform3f;break;case"3m":d=Aero.GLUploaders.uniformMatrix3fv;break;case"4f":d=Aero.GLUploaders.uniform4f;break;case"4m":d=Aero.GLUploaders.uniformMatrix4fv;break;case"t":d=Aero.GLUploaders.uniform1i;break;default:console.log("uniform type: "+a.type+" not yet setup"),d=!1}this.inputs[g]=c,this.uniforms.push({id:g,type:a.type,loc:b,fn:d})}this.arrayExecuter.stepComplete()}function f(){for(var a,b=this.gl,c=this.uniforms.length;c--;)a=this.uniforms[c],a.fn&&a.fn(b,a.loc,this.inputs[a.id])}function g(){var a=this.gl;a.useProgram(this.program),a.program=this.program,this.updateUniforms(),a.drawArrays(a.TRIANGLE_STRIP,0,4)}function h(a,b,c){var d=this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS);return d||console.log("Error compiling "+b+": "+this.gl.getShaderInfoLog(c)),d}function i(a,b){return function(){return a.apply(b,arguments)}}var j=function(a,b){this.arrayExecuter=new Aero.utils.ArrayExecuter(this),this.type="GLProgram",this.inRenderList=!1,this.scene=b,this.settings=a,this.gl=this.scene.gl,this.drawToCanvas=!1,this.clearBuffer="true"==String(a.clearBuffer).toLowerCase()?!0:!1,console.log("this.clearBuffer: "+this.clearBuffer),this.vShader={path:this.settings.vertexShader.replace("~/",this.scene.dirPath)},this.fShader={path:this.settings.fragmentShader.replace("~/",this.scene.dirPath)}};j.prototype.init=b,j.prototype.updateUniforms=f,j.prototype.render=g,Aero.GLProgram=j}(window),function(a){"use strict";function b(a){this.onLoadComplete=a?a:null,this.imgURL||(console.log("loadTexture ERROR: no image url"),this.onLoadComplete(),this.onLoadComplete=null),console.log("loadTexture: "+this.imgURL),this.imgObj=new Image,this.imgObj.onload=d(c,this),this.imgObj.src=this.imgURL}function c(){var a=this.gl,b=this.texture;a.activeTexture(a["TEXTURE"+this.texUnit]),a.bindTexture(a.TEXTURE_2D,b),this.width=this.imgObj.width,this.height=this.imgObj.height,a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.imgObj),this.onLoadComplete&&(this.onLoadComplete(),this.onLoadComplete=null)}function d(a,b){return function(){return a.apply(b,arguments)}}var e=function(a,b){var c=b.gl,d=c.createTexture();this.type="texture",this.inRenderList=!1,this.scene=b,this.settings=a,this.imgURL=a.imgURL?a.imgURL.replace("~/",this.scene.dirPath):null,this.texUnit=a.texUnit,console.log("GLTexture Init: "+this.texUnit),this.gl=c,this.texture=d,c.activeTexture(c["TEXTURE"+this.texUnit]),c.bindTexture(c.TEXTURE_2D,d),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)};e.prototype.loadTexture=b,Aero.GLTexture=e}(window),function(a){"use strict";var b=function(a,b){};b.prototype.uniform1f=function(a,b,c){a.uniform1f(b,c)},b.prototype.uniform2f=function(a,b,c){a.uniform2f(b,c[0],c[1])},b.prototype.uniform3f=function(a,b,c){a.uniform3f(b,c[0],c[1],c[2])},b.prototype.uniform4f=function(a,b,c){a.uniform4f(b,c[0],c[1],c[2],c[3])},b.prototype.uniform1i=function(a,b,c){a.uniform1i(b,c)},b.prototype.uniform2i=function(a,b,c){a.uniform2i(b,c)},b.prototype.uniform3i=function(a,b,c){a.uniform3i(b,c)},b.prototype.uniform4i=function(a,b,c){a.uniform3i(b,c)},b.prototype.uniformMatrix2fv=function(a,b,c){a.uniformMatrix2fv(b,a.FALSE,c)},b.prototype.uniformMatrix3fv=function(a,b,c){a.uniformMatrix3fv(b,a.FALSE,c)},b.prototype.uniformMatrix4fv=function(a,b,c){a.uniformMatrix4fv(b,a.FALSE,c)},Aero.GLUploaders=new b}(window),function(a){"use strict";function b(){}function c(b){var c,d=b.split("."),e=a[d[0]];for(c=1;c<d.length;c++)e=e[d[c]];return e}var d=function(a,b){this.program=c(a.js),this.type="JSProgram",this.inRenderList=!1,this.scene=b,this.settings=a,this.gl=this.scene.gl,this.drawToCanvas=!1,this.outputs=[]};d.prototype.init=b,Aero.JSProgram=d}(window),function(a){"use strict";function b(a){console.log("loadJSON"),Aero.utils.XHRLoader(a,z(c,this))}function c(a){console.log("JSONLoaded");a=JSON.parse(a),this.data=a,this.canvas.width=a.output.dimensions.width,this.canvas.height=a.output.dimensions.height;var b=a.output.preserveDrawingBuffer&&"true"==String(a.output.preserveDrawingBuffer).toLowerCase()?!0:!1;this.gl=this.canvas.getContext("webgl",{preserveDrawingBuffer:b})||this.canvas.getContext("experimental-webgl",{preserveDrawingBuffer:b}),this.maxTextureUnits=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.nextTexUnit=0,this.arrayExecuter.stepComplete()}function d(a){console.log('ERROR: cannot have more than one node with id "'+a+'"')}function e(){var a=this.nextTexUnit;return a>=this.maxTextureUnits&&console.log("ERROR: TexUnit "+a+" | Only "+this.maxTextureUnits+" are supported."),this.nextTexUnit++,a}function f(){console.log("/////////////////  createTextures  /////////////////");var a=this.data.textures,b=[];this.createTexture=z(g,this),this.textures={};for(var c in a){if(this.nodes.hasOwnProperty(c))return void d(c);var e=this.createTexture(a[c]);this.textures[c]=e,this.nodes[c]=e,e.id=c,b.push({fn:z(e.loadTexture,e),vars:[this.stepComplete]})}this.arrayExecuter.execute(b)}function g(a){return new Aero.GLTexture({imgURL:a,texUnit:this.getNextTexUnit()},this)}function h(){console.log("/////////////////  createJSPrograms  /////////////////");var a=this.data.jsPrograms||this.data.JSPrograms,b=[],c=[];this.createNextJSProgram=z(j,this),this.JSPrograms={};for(var e in a){if(this.nodes.hasOwnProperty(e))return void d(e);if(!Aero.JSPrograms[a[e].id]){var f=a[e].js.replace("~/",this.dirPath),g=document.createElement("script");g.type="text/javascript",g.src=f;var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(g,h)}var h,k,l;if(a[e].dependencies&&a[e].dependencies.length)for(h=0;h<a[e].dependencies.length;h++){for(l=!1,a[e].dependencies[h]=a[e].dependencies[h].replace("~/",this.dirPath),k=0;k<c.length;k++)a[e].dependencies[h]==c[k]&&(l=!0);l||(c.push(a[e].dependencies[h]),b.push({fn:i,vars:[a[e].dependencies[h],this.stepComplete]}))}this.JSPrograms[e]={data:a[e],obj:!1},b.push({fn:this.createNextJSProgram,vars:String(""+e)})}this.arrayExecuter.execute(b)}function i(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a;var d=function(){console.log("add script: loaded"),b(a)};if("undefined"!=typeof c.addEventListener)c.addEventListener("load",d,!1);else{var e=function(){"loaded"==c.readyState&&d(a)};c.attachEvent("onreadystatechange",e)}document.getElementsByTagName("head")[0].appendChild(c)}function j(b){if(console.log("createNextJSProgram: "+b),!Aero.JSPrograms[this.JSPrograms[b].data.id])return void a.requestAnimationFrame(z(function(){this.createNextJSProgram(b)},this));var c=new Aero.JSPrograms[this.JSPrograms[b].data.id](this.JSPrograms[b].data,this);this.JSPrograms[b]=c,this.nodes[b]=c,c.id=b,c.type="JSProgram",c.dependents=[],c.init?c.init(this.stepComplete):this.arrayExecuter.stepComplete(),c.run||(c.run=function(){})}function k(){console.log("/////////////////  createGLPrograms  /////////////////");var a=this.data.glPrograms||this.data.GLPrograms,b=[];this.GLPrograms={};for(var c in a){if(this.nodes.hasOwnProperty(c))return void d(c);var e=new Aero.GLProgram(a[c],this);this.GLPrograms[c]=e,this.nodes[c]=e,e.id=c,e.dependents=[],b.push({fn:z(e.init,e),vars:[this.stepComplete]})}this.arrayExecuter.execute(b)}function l(){console.log("/////////////////  createRenderList  /////////////////");var a,b,c,d,e,f,g,h,i,j,k=this.data.connections,l=m(k,"dest","canvas");for(q=0;q<l.length;q++)e=n.call(this,l[q],"source"),e.drawToCanvas=!0;for(this.renderList=[];l.length;)if(a=l.shift(),g=h=!1,b=n.call(this,a,"source"),console.log("checking node: "+b.id),!b.inRenderList){for(b.inRenderList=!0,c=m(k,"source",a.source.id),i=0;i<c.length;i++)e=n.call(this,c[i],"dest"),e&&("texture"==b.type&&(e.inputs[c[i].dest["var"]]=b.texUnit),"GLProgram"==b.type&&b.dependents.push({id:e.id,destVar:c[i].dest["var"]}),"JSProgram"==b.type&&(console.log("add output to JSProgram"),b.dependents.push({obj:e,id:e.id,sourceVar:c[i].source["var"],destVar:c[i].dest["var"]})),f=o(this.renderList,e),c[i].feedback&&"true"==String(c[i].feedback).toLowerCase()||f!==!1&&(h=h!==!1?Math.min(f,h):f));for(d=m(k,"dest",a.source.id),j=0;j<d.length;j++)e=n.call(this,d[j],"source"),e&&(e.inRenderList||l.unshift(d[j]),f=o(this.renderList,e),d[j].feedback&&"true"==String(d[j].feedback).toLowerCase()||f!==!1&&(g=g!==!1?Math.max(f,g):f));if(console.log("adding: "+b.id+", highestIndex: "+h+", lowestIndex: "+g),g!==!1&&h!==!1&&g>=h)return void console.log("createRenderList: FEEDBACK LOOP! lowestIndex is greater than highestIndex");h!==!1?this.renderList.splice(h,0,b):g!==!1?this.renderList.splice(g+1,0,b):this.renderList.push(b)}for(var p="RENDER ORDER: ",q=0;q<this.renderList.length;q++)p+=this.renderList[q].id+" > ";console.log(p),this.arrayExecuter.stepComplete()}function m(a,b,c){for(var d=[],e=0;e<a.length;e++)a[e][b].id.toLowerCase()==String(c).toLowerCase()&&d.push(a[e]);return d}function n(a,b){var c=!1,d=!1;return(c=this.nodes)?(d=c[a[b].id],d?d:(console.log('getConnectedNode: node id "'+a[b].id+'" returned no results'),!1)):(console.log("getConnectedNode: node type "+a[b].type+" returned no results"),!1)}function o(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return!1}function p(){console.log("/////////////////  createFrameBuffers  /////////////////"),this.frameBuffers=[];var a,b,c,d,e,f;if(this.data.frameBuffers)for(var e in this.data.frameBuffers){var g=this.data.frameBuffers[e];if(g.nodes&&g.nodes.length)for(a=q.call(this,0),a.holdForever=!0,f=0;f<g.nodes.length;f++)b=this.nodes[g.nodes[f]],b?b.forcedBuffer=a:console.log('Could not assign frame buffer "'+e+'" to node "'+g.nodes[f]+'" because it does not exist')}for(e=0;e<this.renderList.length;e++)if(b=this.renderList[e],"texture"!=b.type&&("JSProgram"!=b.type||b.draws)&&!b.drawToCanvas&&b.dependents&&b.dependents.length){for(b.forcedBuffer?(a=b.forcedBuffer,b.forcedBuffer=null):a=q.call(this,e),b.outputs=b.outputs||{},b.outputs.texUnit=a.texUnit,f=0;f<b.dependents.length;f++)c=this.nodes[b.dependents[f].id],"GLProgram"==c.type&&(c.inputs[b.dependents[f].destVar]=a.texUnit),d=o(this.renderList,c),a.holdIndex=Math.max(d,a.holdIndex);b.outputBuffer=a.index}this.arrayExecuter.stepComplete()}function q(a){for(var b=0;b<this.frameBuffers.length;b++)if(!this.frameBuffers[b].holdForever&&this.frameBuffers[b].holdIndex<a)return this.frameBuffers[b];var c=r.call(this);return c.index=this.frameBuffers.length,c.holdIndex=0,this.frameBuffers.push(c),c}function r(){var a,b,c=this.gl,d=c.createRenderbuffer(),e=this.canvas.width,f=this.canvas.height,g=this.getNextTexUnit();return console.log("createFrameBuffer: texUnit "+g),a=c.createFramebuffer(),c.activeTexture(c["TEXTURE"+g]),c.bindFramebuffer(c.FRAMEBUFFER,a),b=c.createTexture(),c.bindTexture(c.TEXTURE_2D,b),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,e,f,0,c.RGBA,c.UNSIGNED_BYTE,null),c.bindRenderbuffer(c.RENDERBUFFER,d),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,e,f),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b,0),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,d),c.bindRenderbuffer(c.RENDERBUFFER,null),c.bindFramebuffer(c.FRAMEBUFFER,null),{frameBuffer:a,texture:b,renderBuffer:d,width:e,height:f,texUnit:g}}function s(){var a=this.gl,b=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]),c=a.createBuffer();return c?(a.bindBuffer(a.ARRAY_BUFFER,c),a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW),this.standardVertexBuffer={buffer:c,array:b,fsize:b.BYTES_PER_ELEMENT},this.usingStandardVertexBuffer=!1,void this.arrayExecuter.stepComplete()):(console.log("Failed to create the buffer object"),-1)}function t(){var a=this.gl;this.usingStandardVertexBuffer=!0,a.bindBuffer(a.ARRAY_BUFFER,this.standardVertexBuffer.buffer),u(a,"a_Position",this.standardVertexBuffer.fsize,2,4,0),u(a,"a_TexCoord",this.standardVertexBuffer.fsize,2,4,2)}function u(a,b,c,d,e,f){var g=a.getAttribLocation(a.program,b);return 0>g?(console.log("Failed to get the attribute storage location of "+b),!1):(a.vertexAttribPointer(g,d,a.FLOAT,!1,c*e,c*f),a.enableVertexAttribArray(g),!0)}function v(a,b){var c=this.gl;this.usingStandardVertexBuffer=!1;var d=c.createBuffer();return d?(c.bindBuffer(c.ARRAY_BUFFER,d),c.bufferData(c.ARRAY_BUFFER,a,c.DYNAMIC_DRAW),{buffer:d,length:a.length,data:a,fsize:a.BYTES_PER_ELEMENT,attributes:b}):(console.log("Failed to create the buffer object"),-1)}function w(a){var b=this.gl;this.usingStandardVertexBuffer=!1,b.bindBuffer(b.ARRAY_BUFFER,a.buffer),a.data.length>a.length?(a.length=a.data.length,b.bufferData(b.ARRAY_BUFFER,a.data,b.DYNAMIC_DRAW)):b.bufferSubData(b.ARRAY_BUFFER,0,a.data)}function x(a){var b=this.gl;this.usingStandardVertexBuffer=!1,b.bindBuffer(b.ARRAY_BUFFER,a.buffer);for(var c=a.attributes.length;c--;)u(b,a.attributes[c].id,a.fsize,a.attributes[c].num,a.attributes[c].stride,a.attributes[c].start)}function y(){for(var b,c,d=this.gl,e=0;e<this.renderList.length;e++)switch(b=this.renderList[e],b.type){case"GLProgram":b.drawToCanvas?d.bindFramebuffer(d.FRAMEBUFFER,null):(d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffers[b.outputBuffer].frameBuffer),b.clearBuffer&&d.clear(d.COLOR_BUFFER_BIT)),d.useProgram(b.program),d.program=b.program,this.usingStandardVertexBuffer||this.useStandardVertexBuffer(this),b.updateUniforms(),b.render();break;case"JSProgram":for(b.draws&&(b.drawToCanvas?d.bindFramebuffer(d.FRAMEBUFFER,null):(d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffers[b.outputBuffer].frameBuffer),d.clear(d.COLOR_BUFFER_BIT))),b.run(),c=b.dependents.length;c--;)b.dependents[c].obj.inputs[b.dependents[c].destVar]=b.outputs[b.dependents[c].sourceVar];break;case"texture":}a.requestAnimationFrame(z(y,this))}function z(a,b){return function(){return a.apply(b,arguments)}}var A=function(a,c){console.log("Scene"),this.arrayExecuter=new Aero.utils.ArrayExecuter(this),this.stepComplete=z(this.arrayExecuter.stepComplete,this.arrayExecuter),this.dirPath=a.indexOf("/")>=0?a.substring(0,a.lastIndexOf("/")+1):"",c&&c.canvas?this.canvas=c.canvas:this.canvas=document.createElement("canvas"),this.nodes={};var d=[{fn:z(b,this),vars:a},{fn:z(f,this),vars:null},{fn:z(h,this),vars:null},{fn:z(k,this),vars:null},{fn:z(l,this),vars:null},{fn:z(p,this),vars:null},{fn:z(s,this),vars:null},{fn:z(y,this),vars:null}];this.arrayExecuter.execute(d)};A.prototype.draw=y,A.prototype.getNextTexUnit=e,A.prototype.useStandardVertexBuffer=t,A.prototype.useCustomVertexBuffer=x,A.prototype.createCustomVertexBuffer=v,A.prototype.updateCustomVertexBuffer=w,Aero.Scene=A}(window);